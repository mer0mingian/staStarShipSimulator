{% extends "base.html" %}

{% block title %}Campaigns - STA Starship Simulator{% endblock %}

{% block header %}Campaigns{% endblock %}

{% block content %}
<div class="panel">
    <h2>Active Campaigns</h2>
    {% if campaigns %}
        <ul class="action-list">
            {% for campaign in campaigns %}
                <li style="display: flex; justify-content: space-between; align-items: center;">
                    <a href="{{ url_for('campaigns.campaign_dashboard', campaign_id=campaign.campaign_id) }}"
                       style="color: inherit; text-decoration: none; flex-grow: 1;">
                        <strong>{{ campaign.name }}</strong>
                        {% if campaign.description %}
                            <span class="action-type">{{ campaign.description[:50] }}{% if campaign.description|length > 50 %}...{% endif %}</span>
                        {% endif %}
                    </a>
                    <span style="color: var(--lcars-tan); font-size: 0.9em; margin-left: 10px;">
                        {{ campaign.campaign_id }}
                    </span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No active campaigns. Create one to get started!</p>
    {% endif %}
</div>

<div class="panel">
    <h2>Join a Campaign</h2>
    <form id="join-form" style="display: flex; gap: 10px; align-items: end; flex-wrap: wrap;">
        <div>
            <label for="campaign-code">Campaign Code</label>
            <input type="text" id="campaign-code" placeholder="e.g., abc12345" style="width: 150px;">
        </div>
        <button type="submit" class="btn">Join</button>
    </form>
</div>

<div class="panel">
    <h2>Create New Campaign</h2>
    <a href="{{ url_for('campaigns.new_campaign') }}" class="btn">New Campaign</a>
</div>

<div class="panel" style="border-color: var(--lcars-tan);">
    <h2>Standalone Encounters</h2>
    <p style="color: var(--lcars-tan); margin-bottom: 10px;">
        Quick encounters without campaign context
    </p>
    <a href="{{ url_for('encounters.new_encounter') }}" class="btn btn-small" style="background: var(--lcars-tan);">
        New Standalone Encounter
    </a>
    <a href="{{ url_for('main.index') }}" class="btn btn-small" style="background: #666;">
        View Existing
    </a>
</div>

<script>
document.getElementById('join-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const code = document.getElementById('campaign-code').value.trim();
    if (code) {
        window.location.href = `/campaigns/${code}/join`;
    }
});
</script>
{% endblock %}
